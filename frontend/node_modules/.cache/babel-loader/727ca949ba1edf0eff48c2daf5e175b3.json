{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bendi\\\\Desktop\\\\pu\\\\62\\\\frontend\\\\src\\\\components\\\\NewPost\\\\NewWorkout.js\";\nimport React from \"react\";\nimport styles from \"../../App.module.css\";\nconst defaultState = {\n  title: \"\",\n  addExercise: \"\",\n  exercises: [],\n  exercisesId: \"\",\n  image: \"\",\n  content: \"\",\n  duration: \"\",\n  error: false,\n  visibility: true\n};\nexport default class NewWorkout extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.post = async userdata => {\n      if (this.checkValidPost()) {\n        var date = new Date();\n        var dateFormat = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\n        const formdata = new FormData();\n        formdata.append(\"title\", this.state.title);\n        formdata.append(\"date\", dateFormat);\n        formdata.append(\"content\", this.state.content);\n        formdata.append(\"duration\", this.state.duration);\n        formdata.append(\"image\", this.state.image, this.state.image.name);\n        formdata.append(\"relations\", this.state.exercisesId);\n        formdata.append(\"visibility\", this.state.visibility);\n        formdata.append(\"username\", this.props.user.username ? this.props.user.username : \"\");\n        var parameters = {\n          method: \"POST\",\n          body: formdata,\n          redirect: \"follow\"\n        };\n        const response = await fetch(\"http://localhost:8000/workouts/\", parameters);\n        const data = await response.json();\n        console.log(\"posting a new workout..\");\n        this.props.reFetch();\n        this.setState(defaultState);\n        return data;\n      } else {\n        this.setState({\n          error: true\n        });\n      }\n    };\n\n    this.checkValidPost = () => {\n      return this.state.title.length > 3 && this.state.title.length < 50 && this.state.image && this.state.content.length > 15 && this.state.duration;\n    };\n\n    this.onChange = change => this.setState({\n      [change.target.name]: change.target.value\n    });\n\n    this.onChange = change => this.setState({\n      [change.target.name]: change.target.value\n    });\n\n    this.filterFound = () => {\n      var match = \"\";\n\n      if (this.state.exercises.indexOf(this.state.addExercise) <= -1) {\n        this.props.exercises.forEach(a => this.state.addExercise === a.title ? match = a.id : \"\");\n        return match;\n      }\n    };\n\n    this.state = defaultState;\n  }\n\n  removeFilter(filter) {\n    var oldIds = this.state.exercisesId.split(\" \").slice(1);\n    var newFilters = [];\n    var newIds = \"\";\n    oldIds.splice(this.state.exercises.indexOf(filter), 1);\n    oldIds.forEach(id => newIds = newIds + \" \" + id);\n    this.state.exercises.forEach(a => a !== filter ? newFilters.push(a) : \"\");\n    this.setState({\n      exercises: newFilters,\n      exercisesId: newIds\n    });\n  }\n\n  addFilter() {\n    if (this.filterFound()) {\n      this.setState({\n        exercisesId: this.state.exercisesId + \" \" + this.filterFound(),\n        exercises: [...this.state.exercises, this.state.addExercise],\n        addExercise: \"\"\n      });\n    }\n  }\n\n  render() {\n    if (!this.props.isCreating) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: styles.postWrapperPublish,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Opprett trenings\\xF8kt\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"title\",\n      className: styles.input,\n      placeholder: \"Tittel p\\xE5 \\xF8kt\",\n      value: this.state.title,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      name: \"duration\",\n      type: \"number\",\n      className: styles.inputSmall,\n      placeholder: \"Varighet\",\n      value: this.state.duration,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.postImagePublish,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.gradientPublish,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.inputImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Bilde:\", React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      accept: \"image/png, image/jpeg\",\n      onChange: change => {\n        this.setState({\n          image: change.target.files[0]\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })), \" \"), \" \"), React.createElement(\"textarea\", {\n      className: styles.inputField,\n      name: \"content\",\n      style: {\n        minHeight: 100\n      },\n      placeholder: \"Beskrivelse\",\n      value: this.state.content,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.rowSpace,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"addExercise\",\n      className: this.filterFound() ? styles.inputMedium : styles.inputMediumDisabled,\n      placeholder: \"Finn \\xF8velser\",\n      value: this.state.addExercise.charAt(0).toUpperCase() + this.state.addExercise.slice(1),\n      onChange: this.onChange,\n      onKeyPress: event => event.key === \"Enter\" ? this.addFilter() : \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: this.filterFound() ? styles.buttonSmall : styles.buttonSmallDisabled,\n      onClick: () => this.addFilter(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Velg\")), React.createElement(\"button\", {\n      className: this.state.visibility ? styles.buttonVis : styles.buttonNotVis,\n      onClick: () => this.setState({\n        visibility: !this.state.visibility\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, this.state.visibility ? \"Synlig\" : \"Skjult\"), React.createElement(\"button\", {\n      className: this.checkValidPost() ? styles.button : styles.buttonDisabled,\n      onClick: () => this.post(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Publiser\"))), React.createElement(\"div\", {\n      className: styles.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, this.state.exercises.map(exercise => React.createElement(\"div\", {\n      className: styles.filterListPost,\n      onClick: () => this.removeFilter(exercise),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, exercise))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/bendi/Desktop/pu/62/frontend/src/components/NewPost/NewWorkout.js"],"names":["React","styles","defaultState","title","addExercise","exercises","exercisesId","image","content","duration","error","visibility","NewWorkout","Component","constructor","props","post","userdata","checkValidPost","date","Date","dateFormat","getFullYear","getMonth","getDate","formdata","FormData","append","state","name","user","username","parameters","method","body","redirect","response","fetch","data","json","console","log","reFetch","setState","length","onChange","change","target","value","filterFound","match","indexOf","forEach","a","id","removeFilter","filter","oldIds","split","slice","newFilters","newIds","splice","push","addFilter","render","isCreating","postWrapperPublish","input","inputSmall","postImagePublish","gradientPublish","inputImage","files","inputField","minHeight","rowSpace","inputMedium","inputMediumDisabled","charAt","toUpperCase","event","key","buttonSmall","buttonSmallDisabled","buttonVis","buttonNotVis","button","buttonDisabled","row","map","exercise","filterListPost"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport styles from \"../../App.module.css\";\r\n\r\nconst defaultState = {\r\n  title: \"\",\r\n  addExercise: \"\",\r\n  exercises: [],\r\n  exercisesId: \"\",\r\n  image: \"\",\r\n  content: \"\",\r\n  duration: \"\",\r\n  error: false,\r\n  visibility: true\r\n};\r\n\r\nexport default class NewWorkout extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = defaultState;\r\n  }\r\n\r\n  post = async userdata => {\r\n    if (this.checkValidPost()) {\r\n      var date = new Date();\r\n      var dateFormat =\r\n        date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\r\n      const formdata = new FormData();\r\n      formdata.append(\"title\", this.state.title);\r\n      formdata.append(\"date\", dateFormat);\r\n      formdata.append(\"content\", this.state.content);\r\n      formdata.append(\"duration\", this.state.duration);\r\n      formdata.append(\"image\", this.state.image, this.state.image.name);\r\n      formdata.append(\"relations\", this.state.exercisesId);\r\n      formdata.append(\"visibility\", this.state.visibility)\r\n      formdata.append(\r\n        \"username\",\r\n        this.props.user.username ? this.props.user.username : \"\"\r\n      );\r\n\r\n      var parameters = {\r\n        method: \"POST\",\r\n        body: formdata,\r\n        redirect: \"follow\"\r\n      };\r\n      const response = await fetch(\r\n        \"http://localhost:8000/workouts/\",\r\n        parameters\r\n      );\r\n      const data = await response.json();\r\n      console.log(\"posting a new workout..\");\r\n      this.props.reFetch();\r\n      this.setState(defaultState);\r\n      return data;\r\n    } else {\r\n      this.setState({ error: true });\r\n    }\r\n  };\r\n\r\n  checkValidPost = () => {\r\n    return (\r\n      this.state.title.length > 3 &&\r\n      this.state.title.length < 50 &&\r\n      this.state.image &&\r\n      this.state.content.length > 15 &&\r\n      this.state.duration\r\n    );\r\n  };\r\n\r\n  onChange = change =>\r\n    this.setState({ [change.target.name]: change.target.value });\r\n\r\n  onChange = change =>\r\n    this.setState({ [change.target.name]: change.target.value });\r\n\r\n  filterFound = () => {\r\n    var match = \"\";\r\n    if (this.state.exercises.indexOf(this.state.addExercise) <= -1) {\r\n      this.props.exercises.forEach(a =>\r\n        this.state.addExercise === a.title ? (match = a.id) : \"\"\r\n      );\r\n      return match;\r\n    }\r\n  };\r\n\r\n  removeFilter(filter) {\r\n    var oldIds = this.state.exercisesId.split(\" \").slice(1);\r\n    var newFilters = [];\r\n    var newIds = \"\";\r\n    oldIds.splice(this.state.exercises.indexOf(filter), 1);\r\n    oldIds.forEach(id => (newIds = newIds + \" \" + id));\r\n\r\n    this.state.exercises.forEach(a => (a !== filter ? newFilters.push(a) : \"\"));\r\n    this.setState({ exercises: newFilters, exercisesId: newIds });\r\n  }\r\n\r\n  addFilter() {\r\n    if (this.filterFound()) {\r\n      this.setState({\r\n        exercisesId: this.state.exercisesId + \" \" + this.filterFound(),\r\n        exercises: [...this.state.exercises, this.state.addExercise],\r\n        addExercise: \"\"\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.isCreating) {\r\n      return <div></div>;\r\n    }\r\n\r\n    return (\r\n      <div className={styles.postWrapperPublish}>\r\n        <div className={styles.title}>\r\n          <strong>Opprett treningsøkt</strong>\r\n        </div>\r\n        <div>\r\n          <input\r\n            name=\"title\"\r\n            className={styles.input}\r\n            placeholder=\"Tittel på økt\"\r\n            value={this.state.title}\r\n            onChange={this.onChange}\r\n          />\r\n          <input\r\n            name=\"duration\"\r\n            type=\"number\"\r\n            className={styles.inputSmall}\r\n            placeholder=\"Varighet\"\r\n            value={this.state.duration}\r\n            onChange={this.onChange}\r\n          />\r\n\r\n          <div className={styles.postImagePublish}>\r\n            <div className={styles.gradientPublish}>\r\n              <div className={styles.inputImage}>\r\n                Bilde:\r\n                <input\r\n                  type=\"file\"\r\n                  name=\"image\"\r\n                  accept=\"image/png, image/jpeg\"\r\n                  onChange={change => {\r\n                    this.setState({\r\n                      image: change.target.files[0]\r\n                    });\r\n                  }}\r\n                />\r\n              </div>{\" \"}\r\n            </div>{\" \"}\r\n          </div>\r\n          <textarea\r\n            className={styles.inputField}\r\n            name=\"content\"\r\n            style={{ minHeight: 100 }}\r\n            placeholder=\"Beskrivelse\"\r\n            value={this.state.content}\r\n            onChange={this.onChange}\r\n          />\r\n                 <div className={styles.rowSpace}>\r\n            <div>\r\n          <input\r\n            name=\"addExercise\"\r\n            className={\r\n              this.filterFound()\r\n                ? styles.inputMedium\r\n                : styles.inputMediumDisabled\r\n            }\r\n            placeholder=\"Finn øvelser\"\r\n            value={\r\n              this.state.addExercise.charAt(0).toUpperCase() +\r\n              this.state.addExercise.slice(1)\r\n            }\r\n            onChange={this.onChange}\r\n            onKeyPress={event =>\r\n              event.key === \"Enter\" ? this.addFilter() : \"\"\r\n            }\r\n          />\r\n          <button\r\n            className={\r\n              this.filterFound()\r\n                ? styles.buttonSmall\r\n                : styles.buttonSmallDisabled\r\n            }\r\n            onClick={() => this.addFilter()}\r\n          >\r\n            Velg\r\n          </button></div>\r\n          <button \r\n            className={this.state.visibility ? styles.buttonVis : styles.buttonNotVis} \r\n            onClick={() => this.setState({ visibility: !this.state.visibility })} >\r\n              {this.state.visibility ? \"Synlig\" : \"Skjult\"}\r\n          </button>\r\n          <button\r\n            className={\r\n              this.checkValidPost() ? styles.button : styles.buttonDisabled\r\n            }\r\n            onClick={() => this.post()}\r\n          >\r\n            Publiser\r\n          </button>\r\n        </div></div>\r\n        <div className={styles.row}>\r\n          {this.state.exercises.map(exercise => (\r\n            <div\r\n              className={styles.filterListPost}\r\n              onClick={() => this.removeFilter(exercise)}\r\n            >\r\n              {exercise}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}