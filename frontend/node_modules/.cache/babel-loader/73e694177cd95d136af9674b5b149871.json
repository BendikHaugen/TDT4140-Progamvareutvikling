{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bendi\\\\desktop\\\\pu\\\\62\\\\frontend\\\\src\\\\App.js\";\nimport React from \"react\";\nimport Home from \"./Home\";\nimport Login from \"./components/Login/Login\";\nimport Info from \"./components/Info/Info\";\nimport PostContainer from \"./components/Post/PostContainer\";\nimport { getUser } from \"./actions/user\";\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\nconst defaultState = {\n  user: {},\n  token: \"\",\n  login: false,\n  info: false,\n  feed: true,\n  post: {},\n  postUrl: ''\n};\nlet authenticatedUser = {};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.authenticateUser = token => {\n      if (token) {\n        localStorage.setItem(\"token\", token);\n        getUser(token).then(user => authenticatedUser = user).then(() => this.setState({\n          login: false,\n          token: token,\n          user: authenticatedUser\n        }));\n      }\n    };\n\n    this.getSinglePostUrl = () => {\n      this.setState({\n        postUrl: window.location.href.split(\"posts/\")[1] ? window.location.href.split(\"posts/\")[1].toString() : ''\n      });\n      this.setState({\n        feed: false\n      });\n    };\n\n    this.goToLogin = () => {\n      localStorage.removeItem(\"token\");\n      this.setState(defaultState);\n      this.setState({\n        login: true\n      });\n    };\n\n    this.goToInfo = () => {\n      this.setState({\n        defaultState\n      });\n      this.setState({\n        info: !this.state.info\n      });\n    };\n\n    this.leaveLogin = () => {\n      localStorage.removeItem(\"token\");\n      this.setState(defaultState);\n    };\n\n    this.state = defaultState;\n  }\n\n  componentDidMount() {\n    this.authenticateUser(localStorage.getItem(\"token\"));\n  }\n\n  render() {\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"link\", {\n      href: \"https://fonts.googleapis.com/css?family=Roboto&display=swap\",\n      rel: \"stylesheet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"link\", {\n      href: \"https://fonts.googleapis.com/css?family=Work+Sans&display=swap\",\n      rel: \"stylesheet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Login, {\n      onAuth: user => this.authenticateUser(user.token),\n      onCancel: () => this.leaveLogin(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(Home, {\n      user: this.state.user,\n      token: this.state.token,\n      onLogin: () => this.goToLogin(),\n      onInfo: () => this.goToInfo(),\n      state: this.state,\n      singlePost: post => this.setState({\n        feed: false,\n        post: post\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    })), React.createElement(Route, {\n      exact: true,\n      path: \"/info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Info, {\n      user: this.state.user,\n      onLogin: () => this.goToLogin(),\n      onInfo: () => this.goToInfo(),\n      homeButton: () => this.setState({\n        info: false\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/posts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(PostContainer, {\n      user: this.state.user,\n      token: this.state.token,\n      onLogin: () => this.goToLogin(),\n      onInfo: () => this.goToInfo(),\n      setRoute: () => this.getSinglePostUrl(),\n      homeButton: () => this.setState({\n        feed: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })))), this.state.login ? React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }) : this.state.info ? React.createElement(Redirect, {\n      to: \"/info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }) : this.state.feed ? React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/posts/\" + (this.state.post.id ? this.state.post.id : this.state.postUrl),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/bendi/desktop/pu/62/frontend/src/App.js"],"names":["React","Home","Login","Info","PostContainer","getUser","BrowserRouter","Router","Switch","Route","Redirect","defaultState","user","token","login","info","feed","post","postUrl","authenticatedUser","App","Component","constructor","props","authenticateUser","localStorage","setItem","then","setState","getSinglePostUrl","window","location","href","split","toString","goToLogin","removeItem","goToInfo","state","leaveLogin","componentDidMount","getItem","render","id"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Home from \"./Home\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Info from \"./components/Info/Info\";\r\nimport PostContainer from \"./components/Post/PostContainer\";\r\n\r\nimport { getUser } from \"./actions/user\";\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from \"react-router-dom\";\r\n\r\nconst defaultState = {\r\n  user: {},\r\n  token: \"\",\r\n  login: false,\r\n  info: false,\r\n  feed: true,\r\n  post: {},\r\n  postUrl: ''\r\n};\r\n\r\nlet authenticatedUser = {};\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = defaultState;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.authenticateUser(localStorage.getItem(\"token\"));\r\n  }\r\n\r\n  authenticateUser = token => {\r\n    if (token) {\r\n      localStorage.setItem(\"token\", token);\r\n      getUser(token)\r\n        .then(user => (authenticatedUser = user))\r\n        .then(() =>\r\n          this.setState({ login: false, token: token, user: authenticatedUser })\r\n        );\r\n    }\r\n  };\r\n\r\n  getSinglePostUrl = () => {\r\n    this.setState({postUrl: window.location.href.split(\"posts/\")[1] ? window.location.href.split(\"posts/\")[1].toString() : ''})\r\n    this.setState({feed: false})\r\n  }\r\n\r\n  goToLogin = () => {\r\n    localStorage.removeItem(\"token\");\r\n    this.setState(defaultState);\r\n    this.setState({ login: true });\r\n  };\r\n\r\n  goToInfo = () => {\r\n    this.setState({ defaultState });\r\n    this.setState({ info: !this.state.info });\r\n  };\r\n\r\n  leaveLogin = () => {\r\n    localStorage.removeItem(\"token\");\r\n    this.setState(defaultState);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Router >\r\n        <link\r\n          href=\"https://fonts.googleapis.com/css?family=Roboto&display=swap\"\r\n          rel=\"stylesheet\"\r\n        ></link>\r\n        <link\r\n          href=\"https://fonts.googleapis.com/css?family=Work+Sans&display=swap\"\r\n          rel=\"stylesheet\"\r\n        ></link>\r\n        <div>\r\n          <Switch>\r\n            <Route exact path=\"/login\">\r\n              <Login\r\n                onAuth={user => this.authenticateUser(user.token)}\r\n                onCancel={() => this.leaveLogin()}\r\n              />\r\n            </Route>\r\n            <Route exact path=\"/\">\r\n              <Home\r\n                user={this.state.user}\r\n                token={this.state.token}\r\n                onLogin={() => this.goToLogin()}\r\n                onInfo={() => this.goToInfo()}\r\n                state={this.state}\r\n                singlePost={post => this.setState({ feed: false, post: post})}\r\n              />\r\n            </Route>\r\n            <Route exact path=\"/info\">\r\n              <Info\r\n                user={this.state.user}\r\n                onLogin={() => this.goToLogin()}\r\n                onInfo={() => this.goToInfo()}\r\n                homeButton={() => this.setState({ info: false })}\r\n              />\r\n            </Route>\r\n            <Route path=\"/posts\">\r\n              <PostContainer\r\n              user={this.state.user}\r\n              token={this.state.token}\r\n              onLogin={() => this.goToLogin()}\r\n              onInfo={() => this.goToInfo()}\r\n              setRoute={() => this.getSinglePostUrl()}\r\n              homeButton={() => this.setState({feed: true})}\r\n              />\r\n              </Route> \r\n           </Switch>\r\n        </div>\r\n        {this.state.login ? (\r\n          <Redirect to=\"/login\" />\r\n        ) : this.state.info ? (\r\n          <Redirect to=\"/info\" />\r\n        ) : this.state.feed ? (\r\n          <Redirect to=\"/\" /> ) : <Redirect to={\"/posts/\" + ( this.state.post.id\r\n          ? this.state.post.id : this.state.postUrl)} />\r\n        }\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}