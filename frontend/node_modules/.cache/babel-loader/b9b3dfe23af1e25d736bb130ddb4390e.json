{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bendi\\\\Desktop\\\\pu\\\\62\\\\frontend\\\\src\\\\App.js\";\nimport React from \"react\";\nimport Home from \"./Home\";\nimport Login from \"./components/Login/Login\";\nimport { getUser } from \"./actions/user\";\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\nconst defaultState = {\n  user: {},\n  token: \"\",\n  login: false\n};\nlet authenticatedUser = {};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.authenticateUser = token => {\n      if (token) {\n        localStorage.setItem(\"token\", token);\n        getUser(token).then(user => authenticatedUser = user).then(() => this.setState({\n          login: false,\n          token: token,\n          user: authenticatedUser\n        }));\n      }\n    };\n\n    this.goToLogin = () => {\n      localStorage.removeItem(\"token\");\n      this.setState(defaultState);\n      this.setState({\n        login: true\n      });\n    };\n\n    this.leaveLogin = () => {\n      localStorage.removeItem(\"token\");\n      this.setState(defaultState);\n    };\n\n    this.state = defaultState;\n  }\n\n  componentDidMount() {\n    this.authenticateUser(localStorage.getItem(\"token\"));\n  }\n\n  render() {\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"link\", {\n      href: \"https://fonts.googleapis.com/css?family=Roboto&display=swap\",\n      rel: \"stylesheet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(Login, {\n      onAuth: user => this.authenticateUser(user.token),\n      onCancel: () => this.leaveLogin(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(Home, {\n      user: this.state.user,\n      token: this.state.token,\n      onLogin: () => this.goToLogin(),\n      state: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })))), this.state.login ? React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/bendi/Desktop/pu/62/frontend/src/App.js"],"names":["React","Home","Login","getUser","BrowserRouter","Router","Switch","Route","Redirect","defaultState","user","token","login","authenticatedUser","App","Component","constructor","props","authenticateUser","localStorage","setItem","then","setState","goToLogin","removeItem","leaveLogin","state","componentDidMount","getItem","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Home from \"./Home\";\r\nimport Login from \"./components/Login/Login\";\r\n\r\nimport { getUser } from \"./actions/user\";\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from \"react-router-dom\";\r\n\r\nconst defaultState = {\r\n  user: {},\r\n  token: \"\",\r\n  login: false\r\n};\r\n\r\nlet authenticatedUser = {};\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = defaultState;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.authenticateUser(localStorage.getItem(\"token\"));\r\n  }\r\n\r\n  authenticateUser = token => {\r\n    if (token) {\r\n      localStorage.setItem(\"token\", token);\r\n      getUser(token)\r\n        .then(user => (authenticatedUser = user))\r\n        .then(() =>\r\n          this.setState({ login: false, token: token, user: authenticatedUser })\r\n        );\r\n    }\r\n  };\r\n\r\n  goToLogin = () => {\r\n    localStorage.removeItem(\"token\");\r\n    this.setState(defaultState);\r\n    this.setState({ login: true });\r\n  };\r\n\r\n  leaveLogin = () => {\r\n    localStorage.removeItem(\"token\");\r\n    this.setState(defaultState);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n      <link href=\"https://fonts.googleapis.com/css?family=Roboto&display=swap\" rel=\"stylesheet\"></link>\r\n        <div>\r\n          <Switch>\r\n            <Route exact path=\"/login\">\r\n              <Login\r\n                onAuth={user => this.authenticateUser(user.token)}\r\n                onCancel={() => this.leaveLogin()}\r\n              />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <Home\r\n                user={this.state.user}\r\n                token={this.state.token}\r\n                onLogin={() => this.goToLogin()}\r\n                state={this.state}\r\n              />\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n        {this.state.login ? <Redirect to=\"/login\" /> : <Redirect to=\"/\" />}\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}