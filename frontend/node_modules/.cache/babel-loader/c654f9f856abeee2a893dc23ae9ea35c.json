{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bendi\\\\Desktop\\\\pu\\\\62\\\\frontend\\\\src\\\\components\\\\NewPost\\\\NewExercise.js\";\nimport React from \"react\";\nimport styles from \"../../App.module.css\";\nconst defaultState = {\n  title: \"\",\n  addMusclegroup: \"\",\n  musclegroups: [],\n  musclegroupsId: \"\",\n  image: \"\",\n  content: \"\",\n  sets: \"\",\n  reps: \"\",\n  error: false\n};\nexport default class NewExercise extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.post = async () => {\n      if (this.checkValidPost()) {\n        var date = new Date();\n        var dateFormat = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\n        const formdata = new FormData();\n        formdata.append(\"title\", this.state.title);\n        formdata.append(\"date\", dateFormat);\n        formdata.append(\"content\", this.state.content);\n        formdata.append(\"sets\", this.state.sets ? this.state.sets : 1);\n        formdata.append(\"reps\", this.state.reps ? this.state.reps : 1);\n        formdata.append(\"image\", this.state.image, this.state.image.name);\n        formdata.append(\"relations\", this.state.musclegroupsId);\n        formdata.append(\"username\", this.props.user.username ? this.props.user.username : \"\");\n        var parameters = {\n          method: \"POST\",\n          body: formdata,\n          redirect: \"follow\"\n        };\n        const response = await fetch(\"http://localhost:8000/exercises/\", parameters);\n        const data = await response.json();\n        console.log(\"posting a new exercise..\");\n        this.props.reFetch();\n        this.setState(defaultState);\n        return data;\n      } else {\n        this.setState({\n          error: true\n        });\n      }\n    };\n\n    this.checkValidPost = () => {\n      return this.state.title.length > 3 && this.state.title.length < 50 && !(this.state.title.indexOf(' ') > -1) && this.state.image && this.state.content.length > 15;\n    };\n\n    this.onChange = change => this.setState({\n      [change.target.name]: change.target.value\n    });\n\n    this.filterFound = () => {\n      var match = \"\";\n\n      if (this.state.musclegroups.indexOf(this.state.addMusclegroup) <= -1) {\n        this.props.musclegroups.forEach(a => this.state.addMusclegroup === a.name ? match = a.id : \"\");\n        return match;\n      }\n    };\n\n    this.state = defaultState;\n  }\n\n  removeFilter(filter) {\n    var oldIds = this.state.musclegroupsId.split(\" \").slice(1);\n    var newFilters = [];\n    var newIds = \"\";\n    oldIds.splice(this.state.musclegroups.indexOf(filter), 1);\n    oldIds.forEach(id => newIds = newIds + \" \" + id);\n    this.state.musclegroups.forEach(a => a !== filter ? newFilters.push(a) : \"\");\n    this.setState({\n      musclegroups: newFilters,\n      musclegroupsId: newIds\n    });\n  }\n\n  addFilter() {\n    if (this.filterFound()) {\n      this.setState({\n        musclegroupsId: this.state.musclegroupsId + \" \" + this.filterFound(),\n        musclegroups: [...this.state.musclegroups, this.state.addMusclegroup],\n        addMusclegroup: \"\"\n      });\n    }\n  }\n\n  render() {\n    if (!this.props.isCreating) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: styles.postWrapperPublish,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Legg til ny \\xF8velse\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \" \", React.createElement(\"input\", {\n      name: \"title\",\n      className: styles.input,\n      placeholder: \"Navn p\\xE5 \\xF8velse\",\n      value: this.state.title,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      name: \"reps\",\n      type: \"number\",\n      className: styles.inputSmall,\n      placeholder: \"Repetisjoner\",\n      value: this.state.reps,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      name: \"sets\",\n      type: \"number\",\n      className: styles.inputSmall,\n      placeholder: \"Antall sett\",\n      value: this.state.sets,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.postImagePublish,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.gradientPublish,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.inputImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Bilde:\", React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      accept: \"image/png, image/jpeg\",\n      onChange: change => {\n        this.setState({\n          image: change.target.files[0]\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      className: styles.inputField,\n      name: \"content\",\n      style: {\n        minHeight: 100\n      },\n      placeholder: \"Beskrivelse\",\n      value: this.state.content,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.rowSpace,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"addMusclegroup\",\n      className: this.filterFound() ? styles.inputMedium : styles.inputMediumDisabled,\n      placeholder: \"Finn muskelgrupper\",\n      value: this.state.addMusclegroup.charAt(0).toUpperCase() + this.state.addMusclegroup.slice(1),\n      onChange: this.onChange,\n      onKeyPress: event => event.key === \"Enter\" ? this.addFilter() : \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: this.filterFound() ? styles.buttonSmall : styles.buttonSmallDisabled,\n      onClick: () => this.addFilter(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Velg\"), this.props.user.username === \"admin\" ? React.createElement(\"button\", {\n      className: styles.buttonSmall,\n      onClick: () => this.props.createMusclegroup(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Ny \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"+\")) : \"\"), React.createElement(\"button\", {\n      className: styles.buttonVis,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Synlighet\"), React.createElement(\"button\", {\n      className: this.checkValidPost() ? styles.button : styles.buttonDisabled,\n      onClick: () => this.post(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Publiser\"))), React.createElement(\"div\", {\n      className: styles.row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, this.state.musclegroups.map(musclegroup => React.createElement(\"div\", {\n      className: styles.filterListPost,\n      onClick: () => this.removeFilter(musclegroup),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, musclegroup))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/bendi/Desktop/pu/62/frontend/src/components/NewPost/NewExercise.js"],"names":["React","styles","defaultState","title","addMusclegroup","musclegroups","musclegroupsId","image","content","sets","reps","error","NewExercise","Component","constructor","props","post","checkValidPost","date","Date","dateFormat","getFullYear","getMonth","getDate","formdata","FormData","append","state","name","user","username","parameters","method","body","redirect","response","fetch","data","json","console","log","reFetch","setState","length","indexOf","onChange","change","target","value","filterFound","match","forEach","a","id","removeFilter","filter","oldIds","split","slice","newFilters","newIds","splice","push","addFilter","render","isCreating","postWrapperPublish","input","inputSmall","postImagePublish","gradientPublish","inputImage","files","inputField","minHeight","rowSpace","inputMedium","inputMediumDisabled","charAt","toUpperCase","event","key","buttonSmall","buttonSmallDisabled","createMusclegroup","buttonVis","button","buttonDisabled","row","map","musclegroup","filterListPost"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport styles from \"../../App.module.css\";\r\n\r\nconst defaultState = {\r\n  title: \"\",\r\n  addMusclegroup: \"\",\r\n  musclegroups: [],\r\n  musclegroupsId: \"\",\r\n  image: \"\",\r\n  content: \"\",\r\n  sets: \"\",\r\n  reps: \"\",\r\n  error: false\r\n};\r\n\r\nexport default class NewExercise extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = defaultState;\r\n  }\r\n\r\n  post = async () => {\r\n    if (this.checkValidPost()) {\r\n      var date = new Date();\r\n      var dateFormat =\r\n        date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\r\n      const formdata = new FormData();\r\n      formdata.append(\"title\", this.state.title);\r\n      formdata.append(\"date\", dateFormat);\r\n      formdata.append(\"content\", this.state.content);\r\n      formdata.append(\"sets\", this.state.sets ? this.state.sets : 1);\r\n      formdata.append(\"reps\", this.state.reps ? this.state.reps : 1);\r\n      formdata.append(\"image\", this.state.image, this.state.image.name);\r\n      formdata.append(\"relations\", this.state.musclegroupsId);\r\n      formdata.append(\r\n        \"username\",\r\n        this.props.user.username ? this.props.user.username : \"\"\r\n      );\r\n\r\n      var parameters = {\r\n        method: \"POST\",\r\n        body: formdata,\r\n        redirect: \"follow\"\r\n      };\r\n      const response = await fetch(\r\n        \"http://localhost:8000/exercises/\",\r\n        parameters\r\n      );\r\n      const data = await response.json();\r\n      console.log(\"posting a new exercise..\");\r\n      this.props.reFetch();\r\n      this.setState(defaultState);\r\n      return data;\r\n    } else {\r\n      this.setState({ error: true });\r\n    }\r\n  };\r\n\r\n  checkValidPost = () => {\r\n    return (\r\n      this.state.title.length > 3 &&\r\n      this.state.title.length < 50 &&\r\n      !(this.state.title.indexOf(' ') > -1) &&\r\n      this.state.image &&\r\n      this.state.content.length > 15\r\n    );\r\n  };\r\n\r\n  onChange = change =>\r\n    this.setState({ [change.target.name]: change.target.value });\r\n\r\n  filterFound = () => {\r\n    var match = \"\";\r\n    if (this.state.musclegroups.indexOf(this.state.addMusclegroup) <= -1) {\r\n      this.props.musclegroups.forEach(a =>\r\n        this.state.addMusclegroup === a.name ? (match = a.id) : \"\"\r\n      );\r\n      return match;\r\n    }\r\n  };\r\n\r\n  removeFilter(filter) {\r\n    var oldIds = this.state.musclegroupsId.split(\" \").slice(1);\r\n    var newFilters = [];\r\n    var newIds = \"\";\r\n    oldIds.splice(this.state.musclegroups.indexOf(filter), 1);\r\n    oldIds.forEach(id => (newIds = newIds + \" \" + id));\r\n\r\n    this.state.musclegroups.forEach(a =>\r\n      a !== filter ? newFilters.push(a) : \"\"\r\n    );\r\n    this.setState({ musclegroups: newFilters, musclegroupsId: newIds });\r\n  }\r\n\r\n  addFilter() {\r\n    if (this.filterFound()) {\r\n      this.setState({\r\n        musclegroupsId: this.state.musclegroupsId + \" \" + this.filterFound(),\r\n        musclegroups: [...this.state.musclegroups, this.state.addMusclegroup],\r\n        addMusclegroup: \"\"\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.isCreating) {\r\n      return <div></div>;\r\n    }\r\n    return (\r\n      <div className={styles.postWrapperPublish}>\r\n        <div className={styles.title}>\r\n          <strong>Legg til ny øvelse</strong>\r\n        </div>\r\n        <div>\r\n          {\" \"}\r\n          <input\r\n            name=\"title\"\r\n            className={styles.input}\r\n            placeholder=\"Navn på øvelse\"\r\n            value={this.state.title}\r\n            onChange={this.onChange}\r\n          />\r\n          <input\r\n            name=\"reps\"\r\n            type=\"number\"\r\n            className={styles.inputSmall}\r\n            placeholder=\"Repetisjoner\"\r\n            value={this.state.reps}\r\n            onChange={this.onChange}\r\n          />\r\n          <input\r\n            name=\"sets\"\r\n            type=\"number\"\r\n            className={styles.inputSmall}\r\n            placeholder=\"Antall sett\"\r\n            value={this.state.sets}\r\n            onChange={this.onChange}\r\n          />\r\n        </div>\r\n        <div className={styles.postImagePublish}>\r\n          <div className={styles.gradientPublish}>\r\n            <div className={styles.inputImage}>\r\n              Bilde:\r\n              <input\r\n                type=\"file\"\r\n                name=\"image\"\r\n                accept=\"image/png, image/jpeg\"\r\n                onChange={change => {\r\n                  this.setState({\r\n                    image: change.target.files[0]\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <textarea\r\n            className={styles.inputField}\r\n            name=\"content\"\r\n            style={{ minHeight: 100 }}\r\n            placeholder=\"Beskrivelse\"\r\n            value={this.state.content}\r\n            onChange={this.onChange}\r\n          />\r\n          <div className={styles.rowSpace}>\r\n            <div>\r\n          <input\r\n            name=\"addMusclegroup\"\r\n            className={\r\n              this.filterFound()\r\n                ? styles.inputMedium\r\n                : styles.inputMediumDisabled\r\n            }\r\n            placeholder=\"Finn muskelgrupper\"\r\n            value={\r\n              this.state.addMusclegroup.charAt(0).toUpperCase() +\r\n              this.state.addMusclegroup.slice(1)\r\n            }\r\n            onChange={this.onChange}\r\n            onKeyPress={event =>\r\n              event.key === \"Enter\" ? this.addFilter() : \"\"\r\n            }\r\n          />\r\n          <button\r\n            className={\r\n              this.filterFound()\r\n                ? styles.buttonSmall\r\n                : styles.buttonSmallDisabled\r\n            }\r\n            onClick={() => this.addFilter()}\r\n          >\r\n            Velg\r\n          </button>\r\n          {this.props.user.username === \"admin\" ? (\r\n            <button\r\n              className={styles.buttonSmall}\r\n              onClick={() => this.props.createMusclegroup()}\r\n            >\r\n              Ny <strong>+</strong>\r\n            </button>\r\n          ) : (\r\n            \"\"\r\n          )}</div>\r\n          <button className={styles.buttonVis} >\r\n            Synlighet\r\n          </button>\r\n          <button\r\n            className={\r\n              this.checkValidPost() ? styles.button : styles.buttonDisabled\r\n            }\r\n            onClick={() => this.post()}\r\n          >\r\n            Publiser\r\n          </button>\r\n        </div></div>\r\n        <div className={styles.row}>\r\n          {this.state.musclegroups.map(musclegroup => (\r\n            <div\r\n              className={styles.filterListPost}\r\n              onClick={() => this.removeFilter(musclegroup)}\r\n            >\r\n              {musclegroup}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}